var gulp = require('gulp');
var ba = require('../util/build-argv');

// TODO dev阶段编译引入external资源
gulp.task('copy:core', function () {
    if (ba.isHybridMock) {
        return gulp.src([
                __dirname + '/../temp-core/general/**'
            ])
            .pipe(gulp.dest('./dist/core'));
    } else {
        if (ba.platform.ios) {
            return gulp.src([
                    __dirname + '/../temp-core/iOS/**'
                ])
                .pipe(gulp.dest('./dist/core'));
        } else if (ba.platform.android) {
            return gulp.src([
                    __dirname + '/../temp-core/android/**'
                ])
                .pipe(gulp.dest('./dist/core'));
        } else {
            return callback();
        }
    };
});

gulp.task('copy:mock', function () {
    return gulp.src([
            __dirname + '/../temp-hybrid-mock/**'
        ])
        .pipe(gulp.dest('./dist/hybrid-mock'));
});

// 外部资源引入
// TODO 改引node_modules
gulp.task('external', ['copy:core', 'copy:mock']);
